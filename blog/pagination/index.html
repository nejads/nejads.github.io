<!doctype html><html dir=ltr lang=en data-theme=dark class="html theme--dark"><head><title>Sorosh Nejad
|
Pagination in Spring Boot Applications</title><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Sorosh Nejad"><meta name=description content="Cloud engineer - Backend developer - AppSec speciallist"><link rel=stylesheet href=/scss/main.min.1147aa5bacb4bce677a0e264073829caedb82fd18ea07a5f1d80521f539d1c45.css integrity="sha256-EUeqW6y0vOZ3oOJkBzgpyu24L9GOoHpfHYBSH1OdHEU=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=https://nejads.github.io/blog/pagination/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Pagination in Spring Boot Applications"><meta name=twitter:description content="Paging Paging in web applications is a mechanism to separate a big resultset to smaller chunks. Providing a fluent paging navigator could increase both the value of your website for search engines and enhance user experience through minimizing the response time. The famous example of paging is google&rsquo;s search result page. Normally, the result page is separated into several pages. To avoid the bad user experience mentioned before, a lot of sites show only the current, the first, the last and some adjacent pages."><meta property="og:title" content="Pagination in Spring Boot Applications"><meta property="og:description" content="Paging Paging in web applications is a mechanism to separate a big resultset to smaller chunks. Providing a fluent paging navigator could increase both the value of your website for search engines and enhance user experience through minimizing the response time. The famous example of paging is google&rsquo;s search result page. Normally, the result page is separated into several pages. To avoid the bad user experience mentioned before, a lot of sites show only the current, the first, the last and some adjacent pages."><meta property="og:type" content="article"><meta property="og:url" content="https://nejads.github.io/blog/pagination/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2017-08-10T10:10:38+02:00"><meta property="article:modified_time" content="2023-07-16T18:55:15+02:00"><meta property="og:site_name" content="Sorosh Nejad"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"blog","name":"Pagination in Spring Boot Applications","headline":"Pagination in Spring Boot Applications","alternativeHeadline":"","description":"
      
        Paging Paging in web applications is a mechanism to separate a big resultset to smaller chunks. Providing a fluent paging navigator could increase both the value of your website for search engines and enhance user experience through minimizing the response time. The famous example of paging is google\u0026rsquo;s search result page. Normally, the result page is separated into several pages. To avoid the bad user experience mentioned before, a lot of sites show only the current, the first, the last and some adjacent pages.


      


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/nejads.github.io\/blog\/pagination\/"},"author":{"@type":"Person","name":"Sorosh Nejad"},"creator":{"@type":"Person","name":"Sorosh Nejad"},"accountablePerson":{"@type":"Person","name":"Sorosh Nejad"},"copyrightHolder":{"@type":"Person","name":"Sorosh Nejad"},"copyrightYear":"2017","dateCreated":"2017-08-10T10:10:38.00Z","datePublished":"2017-08-10T10:10:38.00Z","dateModified":"2023-07-16T18:55:15.00Z","publisher":{"@type":"Organization","name":"Sorosh Nejad","url":"https://nejads.github.io/","logo":{"@type":"ImageObject","url":"https:\/\/nejads.github.io\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/nejads.github.io\/blog\/pagination\/","wordCount":"1364","genre":[],"keywords":[]}</script></head><body class=body><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/profile2.jpg alt="profile picture"><div class=sidebar__introduction-title><a href=/>Sorosh Nejad</a></div><div class=sidebar__introduction-description><p>Cloud engineer - Backend developer - AppSec speciallist</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://github.com/nejads target=_blank rel="noopener me" aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:nejads[@]me[.]com target=_blank rel="noopener me" aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://linkedin.com/in/nejads/ target=_blank rel="noopener me" aria-label=LinkedIn title=LinkedIn><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
Sorosh Nejad, 2015-2023</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Home</a></li><li class=nav__list-item><a href=/blog/ title>Blog</a></li><li class=nav__list-item><a href=https://github.com/nejads/til target=_blank rel="noopener noreferrer" title>Today I Learned</a></li><li class=nav__list-item><a href=/about/ title>About</a></li><li class=nav__list-item><a href=/files/cv.pdf title>CV</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>Pagination in Spring Boot Applications</h1><h1 id=paging>Paging</h1><p>Paging in web applications is a mechanism to separate a big resultset to smaller chunks. Providing a fluent paging navigator could increase both the value of your website for search engines and enhance user experience through minimizing the response time. The famous example of paging is google&rsquo;s search result page. Normally, the result page is separated into several pages. To avoid the bad user experience mentioned before, a lot of sites show only the current, the first, the last and some adjacent pages.
To implement paging in Spring framework we can choose different alternatives. The Spring framework provides an out-of-the-box feature for paging which needs the number of pages and the number of elements per page. This is very useful when we would implement a &ldquo;static paging&rdquo; which can offer a user to choose between different pages.
How can we implement a dynamic paging which offers automatically loading the content of a page as we scroll down? In this article, I will present both static and dynamic paging and different ways to implement such services.</p><h4 id=static-paging-with-springdata>Static paging with SpringData</h4><p>This is the most convenient way to implement paging in a web application. It only needs to get page and number of result per page for a query. Instead of using Repository or CrudRepository you should use PagingAndSortingRepository which accept an object of &ldquo;Pageable&rdquo; type.
The Pageable object needs a number of page and number of the element per page. This attributes of a pageable object will return a different result in a query. The result is a &ldquo;page&rdquo; which has the element from specific rows of the whole resultset. The response also includes metadata of total element of the specific query you sent in and total pages. This metadata information could be useful for frontend and to build a UI including links to previous and next pages. In the following link, you can see the result of such approach of paging: <a href="http://softwareengineering.stackexchange.com/search?tab=relevance&pagesize=50&q=excel%20">http://softwareengineering.stackexchange.com/search?tab=relevance&pagesize=50&q=excel%20</a></p><h5 id=how-to-implement-static-paging>How to implement static paging:</h5><p>Here you can find sample code of repository and service layer which give back a paged result from the database. If you turn on the debugging logs, <a href=https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html>either in application.properties or in logback file</a>, you can see the queries which will be created by Spring data.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>@Repository
</span></span><span style=display:flex><span>public interface SomethingRepository extends PagingAndSortingRepository&lt;Something, Long&gt; <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    @Query<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Select s from  Something s &#34;</span>
</span></span><span style=display:flex><span>            + <span style=color:#e6db74>&#34;join s.somethingelse as se &#34;</span>
</span></span><span style=display:flex><span>            + <span style=color:#e6db74>&#34;where se.id = :somethingelseid &#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    Page&lt;Something&gt; findBySomethingElseId<span style=color:#f92672>(</span>@Param<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;somethingelseid&#34;</span><span style=color:#f92672>)</span> long somethingelseid,
</span></span><span style=display:flex><span>                                                                        Pageable pageable<span style=color:#f92672>)</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>@Service
</span></span><span style=display:flex><span>public class SomethingService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    private SomethingRepository somethingRepository;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Autowired
</span></span><span style=display:flex><span>    public SomethingService<span style=color:#f92672>(</span>SomethingRepository somethingRepository<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        this.somethingRepository <span style=color:#f92672>=</span> somethingRepository;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Transactional<span style=color:#f92672>(</span>readOnly<span style=color:#f92672>=</span>true<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    public PageDto getSomething<span style=color:#f92672>(</span>long somethingElseId, int page, int size<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>         Page&lt;Something&gt; somethings <span style=color:#f92672>=</span> somethingRepository.findBySomethingElseId<span style=color:#f92672>(</span>somethingElseId, new PageResult<span style=color:#f92672>(</span>page, size<span style=color:#f92672>))</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> new PageDto<span style=color:#f92672>(</span>somethings.getContent<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>                .stream<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>                .map<span style=color:#f92672>(</span>SomethingDto::createDto<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                .sorted<span style=color:#f92672>(</span>comparing<span style=color:#f92672>(</span>SomethingDto::getDatum<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>                .collect<span style=color:#f92672>(</span>toList<span style=color:#f92672>())</span>, somethings.getTotalElements<span style=color:#f92672>()</span>, somethings.getTotalPages<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>@Controller
</span></span><span style=display:flex><span>//....
</span></span></code></pre></div><h4 id=dynamic-paging-with-nativequery>Dynamic Paging with nativeQuery</h4><p>As it was mentioned before, another face of paging is dynamic paging. This kind of paging can be done with a native query in Spring framework as following code sample shows. For this kind, you need to specify an offset row and a limit which is the number of elements after this offset. You need also write your &ldquo;page&rdquo; class and map the response list to it.</p><h5 id=how-to-implement-dynamic-paging-using-nativequery>How to implement dynamic paging using nativeQuery:</h5><p>Here you can find repository and service layers and your data transfer object(DTO) which will be used for mapping our result and send it to the controller layer.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>public interface CustomSomethingRepository <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    List&lt;Something&gt; findPagedResultBySomethingElseId<span style=color:#f92672>(</span>long somethingElseId, int offset, int limit<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>public class SomethingRepositoryImpl implements CustomSomethingRepository <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    @Autowired
</span></span><span style=display:flex><span>    private EntityManager em;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @SuppressWarnings<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;unchecked&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    @Override
</span></span><span style=display:flex><span>    public List&lt;Something&gt; findPagedResultBySomethingElseId<span style=color:#f92672>(</span>long somethingElseId, int offset, int limit<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String query <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;select s.* from Something s &#34;</span>
</span></span><span style=display:flex><span>                + <span style=color:#e6db74>&#34;join somethingelse selse on selse.id = s.fk_somethingelse &#34;</span>
</span></span><span style=display:flex><span>                + <span style=color:#e6db74>&#34;where selse.id = :somethingElseId &#34;</span>
</span></span><span style=display:flex><span>                + <span style=color:#e6db74>&#34;order by selse.date&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Query nativeQuery <span style=color:#f92672>=</span> em.createNativeQuery<span style=color:#f92672>(</span>query<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>        nativeQuery.setParameter<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;somethingElseId&#34;</span>, somethingElseId<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        //Paginering
</span></span><span style=display:flex><span>        nativeQuery.setFirstResult<span style=color:#f92672>(</span>offset<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>        nativeQuery.setMaxResults<span style=color:#f92672>(</span>limit<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        final List&lt;Object<span style=color:#f92672>[]</span>&gt; resultList <span style=color:#f92672>=</span> nativeQuery.getResultList<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>        List&lt;Something&gt; somethingList <span style=color:#f92672>=</span> Lists.newArrayList<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>        resultList.forEach<span style=color:#f92672>(</span>object -&gt; somethingList.add<span style=color:#f92672>(</span>//map obj to something<span style=color:#f92672>))</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> somethingList;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Hibernate translate your query as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>    SELECT inner_query.*, ROW_NUMBER<span style=color:#f92672>()</span> OVER <span style=color:#f92672>(</span>ORDER BY CURRENT_TIMESTAMP<span style=color:#f92672>)</span> as __hibernate_row_nr__ FROM <span style=color:#f92672>(</span> <span style=color:#66d9ef>select</span> TOP<span style=color:#f92672>(</span>?<span style=color:#f92672>)</span> t as page0_ from Something s join s.somethingelse as selse order by selse.date <span style=color:#f92672>)</span> inner_query <span style=color:#f92672>)</span> SELECT page0_ FROM query WHERE __hibernate_row_nr__ &gt;<span style=color:#f92672>=</span> ? AND __hibernate_row_nr__ &lt; ?
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>@Service
</span></span><span style=display:flex><span>public class SomethingService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    private SomethingRepository somethingRepository;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Autowired
</span></span><span style=display:flex><span>    public SomethingService<span style=color:#f92672>(</span>SomethingRepository somethingRepository<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        this.somethingRepository <span style=color:#f92672>=</span> somethingRepository;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Transactional<span style=color:#f92672>(</span>readOnly<span style=color:#f92672>=</span>true<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    public PageDto getSomething<span style=color:#f92672>(</span>long somethingElseId, int page, int size<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>         List&lt;Something&gt; somethings <span style=color:#f92672>=</span> somethingRepository.findBySomethingElseId<span style=color:#f92672>(</span>somethingElseId, offset, limit<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> new PagedResult&lt;&gt;<span style=color:#f92672>(</span>somethings
</span></span><span style=display:flex><span>                .stream<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>                .map<span style=color:#f92672>(</span>SomethingDto::createDto<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                .sorted<span style=color:#f92672>(</span>comparing<span style=color:#f92672>(</span>SomethingDto::getDatum<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>                .collect<span style=color:#f92672>(</span>toList<span style=color:#f92672>())</span>, somethings.getTotalElements<span style=color:#f92672>()</span>, somethings.getTotalPages<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>@Controller
</span></span><span style=display:flex><span>//....
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>public class PagedResult&lt;T&gt; <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    public static final long DEFAULT_OFFSET <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>    public static final int DEFAULT_MAX_NO_OF_ROWS <span style=color:#f92672>=</span> 100;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    private int offset;
</span></span><span style=display:flex><span>    private int limit;
</span></span><span style=display:flex><span>    private long totalElements;
</span></span><span style=display:flex><span>    private List&lt;T&gt; elements;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    public PagedResult<span style=color:#f92672>(</span>List&lt;T&gt; elements, long totalElements, int offset, int limit<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        this.elements <span style=color:#f92672>=</span> elements;
</span></span><span style=display:flex><span>        this.totalElements <span style=color:#f92672>=</span> totalElements;
</span></span><span style=display:flex><span>        this.offset <span style=color:#f92672>=</span> offset;
</span></span><span style=display:flex><span>        this.limit <span style=color:#f92672>=</span> limit;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    public boolean hasMore<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> totalElements &gt; offset + limit;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    public boolean hasPrevious<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> offset &gt; <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> totalElements &gt; 0;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    public long getTotalElements<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> totalElements;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    public int  getOffset<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> offset;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    public int getLimit<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> limit;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    public List&lt;T&gt; getElements<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> elements;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=pros-and-cons>Pros and Cons:</h4><p><em>Pros:</em> Fewer SQL queries will be generated in comparison with using Spring data. The complex queries can not be written in Spring data and we have to specify our query as a native one can still be paged by using this methodology.
cons: The &ldquo;object&rdquo; array must map to a java object. It is painful and hard to maintain.</p><h4 id=how-to-implement-offsetlimit-paging-with-spring-data>How to implement OffsetLimit paging with Spring data?</h4><p>As far as I know, there is no &ldquo;out-of-the-box&rdquo; support for what you need in default SrpingData repositories. But you can create a custom implementation of Pageable objects, that will take limit/offset parameters.</p><p>Make a pageable object and pass it to PagingAndSortingRepository</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>public class OffsetLimitRequest implements Pageable <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    private int limit;
</span></span><span style=display:flex><span>    private int offset;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    public OffsetLimitRequest<span style=color:#f92672>(</span>int offset, int limit<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        this.limit <span style=color:#f92672>=</span> limit;
</span></span><span style=display:flex><span>        this.offset <span style=color:#f92672>=</span> offset;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        @Override
</span></span><span style=display:flex><span>    public int getPageNumber<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> 0;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Override
</span></span><span style=display:flex><span>    public int getPageSize<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> limit;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Override
</span></span><span style=display:flex><span>    public int getOffset<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> offset;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    ....
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>It means there is no need to change the repository layer. The only change you would need is to change service layer as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>@Service
</span></span><span style=display:flex><span>public class SomethingService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    private SomethingRepository somethingRepository;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Autowired
</span></span><span style=display:flex><span>    public SomethingService<span style=color:#f92672>(</span>SomethingRepository somethingRepository<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        this.somethingRepository <span style=color:#f92672>=</span> somethingRepository;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Transactional<span style=color:#f92672>(</span>readOnly<span style=color:#f92672>=</span>true<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    public PageDto getSomething<span style=color:#f92672>(</span>long somethingElseId, int page, int size<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        Page&lt;Something&gt; somethings <span style=color:#f92672>=</span> somethingRepository.findBySomethingElseId<span style=color:#f92672>(</span>somethingElseId, new OffsetLimitRequest<span style=color:#f92672>(</span>offset, limit<span style=color:#f92672>))</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> new PageDto<span style=color:#f92672>(</span>somethings.getContent<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>                .stream<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>                .map<span style=color:#f92672>(</span>SomethingDto::createDto<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                .sorted<span style=color:#f92672>(</span>comparing<span style=color:#f92672>(</span>SomethingDto::getDatum<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>                .collect<span style=color:#f92672>(</span>toList<span style=color:#f92672>())</span>, somethings.getTotalElements<span style=color:#f92672>()</span>, somethings.getTotalPages<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Note that you don&rsquo;t need to map the result manually and it will decrease a good amount of time of the development.</p><h3 id=sort-the-result>Sort the result</h3><p>As you can see in the code snippet above, you can sort the result based on properties using stream interface in Java8. You can also develop your pageable object with a &ldquo;sort&rdquo; object argument from the package &ldquo;org.springframework.data.domain&rdquo;. A sort object can be initiated with a Direction which is ASC or DESC and an iterable object of your property names of your entity. Our previous OffsetLimitRequest class changed as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>public class OffsetLimitRequest implements Pageable, Serializable <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    private static final long serialVersionUID <span style=color:#f92672>=</span> -4541509938956089562L;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    private int limit;
</span></span><span style=display:flex><span>    private int offset;
</span></span><span style=display:flex><span>    private Sort sort;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    public OffsetLimitRequest<span style=color:#f92672>(</span>int offset, int limit, Sort sort<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        this.limit <span style=color:#f92672>=</span> limit;
</span></span><span style=display:flex><span>        this.offset <span style=color:#f92672>=</span> offset;
</span></span><span style=display:flex><span>        this.sort <span style=color:#f92672>=</span> sort;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Override
</span></span><span style=display:flex><span>    public int getPageNumber<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> 0;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Override
</span></span><span style=display:flex><span>    public int getPageSize<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> limit;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Override
</span></span><span style=display:flex><span>    public int getOffset<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> offset;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Override
</span></span><span style=display:flex><span>    public Sort getSort<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> sort;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    ....
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>which can be initated in our service layer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>@Service
</span></span><span style=display:flex><span>public class SomethingService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    private SomethingRepository somethingRepository;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Autowired
</span></span><span style=display:flex><span>    public SomethingService<span style=color:#f92672>(</span>SomethingRepository somethingRepository<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        this.somethingRepository <span style=color:#f92672>=</span> somethingRepository;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Transactional<span style=color:#f92672>(</span>readOnly<span style=color:#f92672>=</span>true<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    public PageDto getSomething<span style=color:#f92672>(</span>long somethingElseId, int page, int size<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        List&lt;String&gt; sortingOnSomethingsAttributes <span style=color:#f92672>=</span> Arrays.asList<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;attr1&#34;</span>, <span style=color:#e6db74>&#34;attr2&#34;</span><span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>        Page&lt;Something&gt; somethings <span style=color:#f92672>=</span> somethingRepository.findBySomethingElseId<span style=color:#f92672>(</span>somethingElseId, new OffsetLimitRequest<span style=color:#f92672>(</span>offset, limit, new Sort<span style=color:#f92672>(</span>Sort.Direction.fromString<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ASC&#34;</span><span style=color:#f92672>)</span>, sortingOnSomethingsAttributes<span style=color:#f92672>))</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> new PageDto<span style=color:#f92672>(</span>somethings.getContent<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>                .stream<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>                .map<span style=color:#f92672>(</span>SomethingDto::createDto<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                .collect<span style=color:#f92672>(</span>toList<span style=color:#f92672>())</span>, somethings.getTotalElements<span style=color:#f92672>()</span>, somethings.getTotalPages<span style=color:#f92672>()</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Note that we don&rsquo;t need sorted in the stream the return statement. When we handle big result sets It is better to have sorting functions near the database to get better performance.</p><h4 id=link-on-dzone>Link on DZone</h4><p>You can find <a href=https://dzone.com/articles/pagination-in-springboot-applications>this post on DZone</a></p><h4 id=useful-links>Useful links:</h4><ul><li><a href=http://docs.spring.io/spring-data/rest/docs/current/reference/html/>Spring data reference</a></li><li><a href=http://blog.novatec-gmbh.de/art-pagination-offset-vs-value-based-paging/>The art of pagination</a></li><li><a href=https://blog.zenika.com/2012/06/15/hateoas-paging-with-spring-mvc-and-spring-data-jpa/>Paging with Spring MVC and Spring Data JPA</a></li><li><a href=https://dzone.com/articles/rest-pagination-spring>REST Pagination in Spring</a></li></ul></div><div class=post__footer></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
Sorosh Nejad, 2015-2023</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script></body></html>