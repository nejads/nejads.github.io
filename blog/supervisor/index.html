<!doctype html><html dir=ltr lang=en data-theme=dark class="html theme--dark"><head><title>Sorosh Nejad
|
Process management on Amazon linux Al2023 with Supervisor</title><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Sorosh Nejad"><meta name=description content="Cloud engineer - Backend developer - AppSec speciallist"><link rel=stylesheet href=/scss/main.min.1147aa5bacb4bce677a0e264073829caedb82fd18ea07a5f1d80521f539d1c45.css integrity="sha256-EUeqW6y0vOZ3oOJkBzgpyu24L9GOoHpfHYBSH1OdHEU=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=https://nejads.github.io/blog/supervisor/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Process management on Amazon linux Al2023 with Supervisor"><meta name=twitter:description content="Introduction Have you ever found yourself wrestling with managing processes on your server efficiently? Enter Supervisor â€“ a robust and adaptable process control system designed for Unix-like systems. In this tutorial, we&rsquo;ll walk you through the process of installing and setting up Supervisor on Amazon Linux 2023. Whether you&rsquo;re a developer, sysadmin, or simply someone eager to enhance your server management skills, this guide is tailored for you.
What is Supervisor?"><meta property="og:title" content="Process management on Amazon linux Al2023 with Supervisor"><meta property="og:description" content="Introduction Have you ever found yourself wrestling with managing processes on your server efficiently? Enter Supervisor â€“ a robust and adaptable process control system designed for Unix-like systems. In this tutorial, we&rsquo;ll walk you through the process of installing and setting up Supervisor on Amazon Linux 2023. Whether you&rsquo;re a developer, sysadmin, or simply someone eager to enhance your server management skills, this guide is tailored for you.
What is Supervisor?"><meta property="og:type" content="article"><meta property="og:url" content="https://nejads.github.io/blog/supervisor/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-01-25T10:10:38+02:00"><meta property="article:modified_time" content="2024-01-25T14:55:30+01:00"><meta property="og:site_name" content="Sorosh Nejad"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"blog","name":"Process management on Amazon linux Al2023 with Supervisor","headline":"Process management on Amazon linux Al2023 with Supervisor","alternativeHeadline":"","description":"
      
        Introduction Have you ever found yourself wrestling with managing processes on your server efficiently? Enter Supervisor â€“ a robust and adaptable process control system designed for Unix-like systems. In this tutorial, we\u0026rsquo;ll walk you through the process of installing and setting up Supervisor on Amazon Linux 2023. Whether you\u0026rsquo;re a developer, sysadmin, or simply someone eager to enhance your server management skills, this guide is tailored for you.\nWhat is Supervisor?


      


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/nejads.github.io\/blog\/supervisor\/"},"author":{"@type":"Person","name":"Sorosh Nejad"},"creator":{"@type":"Person","name":"Sorosh Nejad"},"accountablePerson":{"@type":"Person","name":"Sorosh Nejad"},"copyrightHolder":{"@type":"Person","name":"Sorosh Nejad"},"copyrightYear":"2023","dateCreated":"2023-01-25T10:10:38.00Z","datePublished":"2023-01-25T10:10:38.00Z","dateModified":"2024-01-25T14:55:30.00Z","publisher":{"@type":"Organization","name":"Sorosh Nejad","url":"https://nejads.github.io/","logo":{"@type":"ImageObject","url":"https:\/\/nejads.github.io\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/nejads.github.io\/blog\/supervisor\/","wordCount":"821","genre":[],"keywords":[]}</script></head><body class=body><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/profile2.jpg alt="profile picture"><div class=sidebar__introduction-title><a href=/>Sorosh Nejad</a></div><div class=sidebar__introduction-description><p>Cloud engineer - Backend developer - AppSec speciallist</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://github.com/nejads target=_blank rel="noopener me" aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:nejads[@]me[.]com target=_blank rel="noopener me" aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://linkedin.com/in/nejads/ target=_blank rel="noopener me" aria-label=LinkedIn title=LinkedIn><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
Sorosh Nejad, 2015-2024</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Home</a></li><li class=nav__list-item><a href=/blog/ title>Blog</a></li><li class=nav__list-item><a href=https://github.com/nejads/til target=_blank rel="noopener noreferrer" title>Today I Learned</a></li><li class=nav__list-item><a href=/about/ title>About</a></li><li class=nav__list-item><a href=/files/cv.pdf title>CV</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>Process Management on Amazon Linux Al2023 With Supervisor</h1><h4 id=introduction>Introduction</h4><p>Have you ever found yourself wrestling with managing processes on your server efficiently? Enter Supervisor â€“ a robust and adaptable process control system designed for Unix-like systems. In this tutorial, we&rsquo;ll walk you through the process of installing and setting up Supervisor on Amazon Linux 2023. Whether you&rsquo;re a developer, sysadmin, or simply someone eager to enhance your server management skills, this guide is tailored for you.</p><h4 id=what-is-supervisor>What is Supervisor?</h4><p>Supervisor is a process control system that simplifies the management of processes, applications, and task scheduling on Unix-like operating systems. Its user-friendly interface and powerful features make it an ideal choice for those seeking to streamline and enhance their server management capabilities.</p><h4 id=prerequisites>Prerequisites</h4><p>Before diving into the installation process, make sure you have:</p><ul><li>An instance of Amazon Linux 2023</li><li>Access to the server with administrative privileges</li><li>This tutorial assumes we are using the &ldquo;deployer&rdquo; user for deploying Supervisor</li><li>This tutorial showcases installing pip packages on a custom path</li></ul><h4 id=step1-python3-and-pip>Step1: Python3 and Pip</h4><p>Make sure that Python3 and pip is installed on the machine. You can install pip as follows</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dnf install pip -y
</span></span></code></pre></div><h4 id=step2-install-supervisor>Step2: Install supervisor</h4><p>Now, let&rsquo;s install Supervisor using a handy script. Save the following script as install.sh, change its owner to &ldquo;deployer,&rdquo; and execute it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo chown -R deployer:deployer install.sh
</span></span></code></pre></div><p>The install script:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set -e
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;supervisor&#34;</span>
</span></span><span style=display:flex><span>supervisor_version<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;4.2.5&#34;</span>
</span></span><span style=display:flex><span>install_path_prefix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/opt&#34;</span>
</span></span><span style=display:flex><span>package_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>-</span><span style=color:#e6db74>${</span>supervisor_version<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>script_dir<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span> cd <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span> dirname <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>BASH_SOURCE[0]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>&amp;&amp;</span> pwd <span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>; <span style=color:#75715e># The directory containing this script</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Verify Python and pip</span>
</span></span><span style=display:flex><span>su deployer -c <span style=color:#e6db74>&#34;python -V 2&gt;&amp;1 | grep -q -e &#34;</span>Python 3<span style=color:#ae81ff>\.</span><span style=color:#e6db74>&#34;&#39; 2&gt;/dev/null&#34;</span>
</span></span><span style=display:flex><span>exitValue<span style=color:#f92672>=</span>$?
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $exitValue -eq <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;Python3 has not been installed&#34;</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;Found python 3&#34;</span>
</span></span><span style=display:flex><span>    which python
</span></span><span style=display:flex><span>    python -V
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>su deployer -c <span style=color:#e6db74>&#34;pip --version 2&gt;&amp;1 | grep -q -e &#34;</span>pip 2<span style=color:#e6db74>&#34;&#39; 2&gt;/dev/null&#34;</span>
</span></span><span style=display:flex><span>exitValue<span style=color:#f92672>=</span>$?
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $exitValue -eq <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;pip has not been installed&#34;</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;Found pip 3&#34;</span>
</span></span><span style=display:flex><span>    which pip
</span></span><span style=display:flex><span>    pip --version
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create directories needed for the installation</span>
</span></span><span style=display:flex><span>mkdir -p <span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>mkdir -p <span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>package_name<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>mkdir -p <span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>package_name<span style=color:#e6db74>}</span>/etc
</span></span><span style=display:flex><span>mkdir -p /var<span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>package_name<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Install supervisor4</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Installing supervisor </span><span style=color:#e6db74>${</span>supervisor_version<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>export PYTHONUSERBASE<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>name<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>pip install supervisor<span style=color:#f92672>==</span><span style=color:#e6db74>${</span>supervisor_version<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Put the supervisord.conf file in place</span>
</span></span><span style=display:flex><span>su deployer -c <span style=color:#e6db74>&#34;cp </span><span style=color:#e6db74>${</span>script_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/supervisord.conf </span><span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>package_name<span style=color:#e6db74>}</span><span style=color:#e6db74>/etc&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Substitute PORT in supervisord.conf</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/opt&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>9001</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>9003</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>su deployer -c <span style=color:#e6db74>&#34;sed -i \&#39;s|PORT|</span><span style=color:#e6db74>${</span>PORT<span style=color:#e6db74>}</span><span style=color:#e6db74>|\&#39; </span><span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>package_name<span style=color:#e6db74>}</span><span style=color:#e6db74>/etc/supervisord.conf &#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create the symlink</span>
</span></span><span style=display:flex><span>su deployer -c <span style=color:#e6db74>&#34;ln -sfn </span><span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>package_name<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p>supervisor config file is as follows, Since we have changed the default pip installation path by setting PYTHONUSERBASE environmental variable, same variable need to be set on the config file.
If you wish use the default configuration, do like that.</p><p>Instead of</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>su deployer -c <span style=color:#e6db74>&#34;cp </span><span style=color:#e6db74>${</span>script_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/supervisord.conf </span><span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>package_name<span style=color:#e6db74>}</span><span style=color:#e6db74>/etc&#34;</span>
</span></span></code></pre></div><p>run this</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>echo_supervisord_conf &gt; <span style=color:#e6db74>${</span>install_path_prefix<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>package_name<span style=color:#e6db74>}</span>/etc/supervisord.conf
</span></span></code></pre></div><p>Here you can find an example on a custom config file</p><pre tabindex=0><code>; Sample supervisor config file.
;
; For more information on the config file, please see:
; http://supervisord.org/configuration.html
;
; Notes:
;  - Shell expansion (&#34;~&#34; or &#34;$HOME&#34;) is not supported.  Environment
;    variables can be expanded using this syntax: &#34;%(ENV_HOME)s&#34;.
;  - Comments must have a leading space: &#34;a=b ;comment&#34; not &#34;a=b;comment&#34;.

[unix_http_server]
file=/varPREFIX/supervisor/supervisor.sock   ; (the path to the socket file)

[inet_http_server]         ; inet (TCP) server disabled by default
port=0.0.0.0:PORT                ; (ip_address:port specifier, *:port for all iface)

[supervisord]
logfile=/varPREFIX/supervisor/supervisord.log ; (main log file;default $CWD/supervisord.log)
logfile_maxbytes=50MB        ; (max main logfile bytes b4 rotation;default 50MB)
logfile_backups=10           ; (num of main logfile rotation backups;default 10)
loglevel=info                ; (log level;default info; others: debug,warn,trace)
pidfile=/tmp/supervisord.pid ; (supervisord pidfile;default supervisord.pid)
nodaemon=false               ; (start in foreground if true;default false)
minfds=1024                  ; (min. avail startup file descriptors;default 1024)
minprocs=200                 ; (min. avail process descriptors;default 200)
user=deployer                 ; (default is current user, required if root)
childlogdir=/varPREFIX/supervisor/            ; (&#39;AUTO&#39; child log dir, default $TEMP)
environment=PYTHONUSERBASE=&#34;/opt/supervisor&#34;
strip_ansi=true              ; (strip ansi escape codes in logs; def. false)

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=http://127.0.0.1:PORT
environment=PYTHONUSERBASE=&#34;/opt/supervisor&#34;

[include]
files = supervisor.d/*.ini
</code></pre><p>This script installs Supervisor version 4.2.5 and sets up the necessary directories and configurations. Customize it according to your preferences.</p><h4 id=starting-supervisor-on-each-reboot>Starting supervisor on each reboot</h4><p>Once Supervisor is installed for the &ldquo;deployer&rdquo; user under /opt, ensure it runs on every start and reboot by adding Supervisor as a systemd unit.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Starting supervisord...&#34;</span>
</span></span><span style=display:flex><span>systemd_path<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/etc/systemd/system&#34;</span>
</span></span><span style=display:flex><span>sudo cp <span style=color:#e6db74>${</span>script_dir<span style=color:#e6db74>}</span>/supervisord.service <span style=color:#e6db74>${</span>sysemd_path<span style=color:#e6db74>}</span>/supervisord.service
</span></span><span style=display:flex><span>sudo chown deployer:deployer <span style=color:#e6db74>${</span>sysemd_path<span style=color:#e6db74>}</span>/supervisord.service
</span></span><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>755</span> <span style=color:#e6db74>${</span>sysemd_path<span style=color:#e6db74>}</span>/supervisord.service
</span></span><span style=display:flex><span>sudo systemctl daemon-reload
</span></span><span style=display:flex><span>sudo systemctl enable supervisord
</span></span><span style=display:flex><span>sudo systemctl start supervisord
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Done starting supervisord&#34;</span>
</span></span></code></pre></div><p>You also need run the supervisor systemd service as &ldquo;deployer&rdquo; user. It can be done in system unit file (supervisord.service) as follows</p><pre tabindex=0><code>[Unit]
Description=A service that starts supervisord.
After=network.target

[Service]
Type=forking
ExecStart=/bin/bash --login -c &#39;/opt/supervisor/bin/supervisord -c /opt/supervisor/etc/supervisord.conf&#39;
User=deployer
Group=deployer
Restart=always

[Install]
WantedBy=multi-user.target
</code></pre><p>This script creates a systemd service for Supervisor, ensuring it starts on boot and is managed by the &ldquo;deployer&rdquo; user.</p><p>Now, you&rsquo;ve successfully installed Supervisor on Amazon Linux Al2023 and configured it to run seamlessly, supercharging your process management capabilities. Feel free to explore Supervisor&rsquo;s extensive documentation for advanced features and customization options. Happy supervising! ðŸš€</p></div><div class=post__footer></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
Sorosh Nejad, 2015-2024</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script></body></html>